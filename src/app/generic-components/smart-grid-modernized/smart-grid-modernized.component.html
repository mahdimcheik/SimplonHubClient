<div class="table-container">
    <div class="flex flex-row items-center gap-2 bg-white p-2 rounded-t-md dark:bg-gray-800">
        @for (column of columns(); track column.field) {
            <div class="flex items-center gap-2">
                <!-- Filter button -->
                @if (column.filterable) {
                    @if (column.type === 'text') {
                        <div class="flex flex-col items-start justify-between gap-2">
                            <label class="text-sm font-semibold">{{ column.header }}</label>
                            <input pInputText type="text" placeholder="Saisir..." [value]="getFilterValue(column.filterField ?? column.field) || ''" (input)="onTextFilterChange($any($event.target).value, column)" />
                        </div>
                    }
                    @if (column.type === 'select') {
                        <div class="flex flex-col items-start justify-end gap-2">
                            <label class="text-sm font-semibold">{{ column.header }}</label>
                            <p-select
                                [options]="column.options || []"
                                [optionLabel]="column.optionLabel || 'label'"
                                [optionValue]="column.optionValue || 'value'"
                                [ngModel]="getFilterValue(column.filterField ?? column.field)"
                                (ngModelChange)="onSelectFilterChange($event, column)"
                                placeholder="Sélectionner"
                                [showClear]="true"
                                styleClass="w-full"
                            />
                        </div>
                    }
                    @if (column.type === 'array') {
                        <div class="flex flex-col items-start justify-end gap-2">
                            <label class="text-sm font-semibold">{{ column.header }}</label>
                            <p-multiselect
                                [options]="column.options || []"
                                [optionLabel]="column.optionLabel || 'label'"
                                [optionValue]="column.optionValue || 'value'"
                                [ngModel]="getFilterValue(column.filterField ?? column.field)"
                                (ngModelChange)="onArrayFilterChange($event, column)"
                                placeholder="Sélectionner..."
                                [showClear]="true"
                                display="chip"
                                styleClass="w-full"
                            />
                        </div>
                    }
                    @if (column.type === 'date') {
                        <div class="flex flex-col items-start gap-1">
                            <p-select
                                [options]="dateFilterMatchModes"
                                optionLabel="label"
                                optionValue="value"
                                [ngModel]="getDateFilterMatchMode(column.filterField ?? column.field)"
                                (ngModelChange)="onDateFilterMatchModeChange($event, column)"
                                [placeholder]="column.header"
                                styleClass="w-full"
                            />
                            <p-datepicker [ngModel]="getFilterValue(column.filterField ?? column.field)" (ngModelChange)="onDateFilterChange($event, column)" [showTime]="true" [showButtonBar]="true" dateFormat="dd/mm/yy" styleClass="w-full" />
                        </div>
                    }
                }
            </div>
        }
    </div>
    <div>
        <!-- @for (column of columns(); track column.field) {
                <ng-content [select]="column.field" ></ng-content>
        } -->
    </div>
</div>
